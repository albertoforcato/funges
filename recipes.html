<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="canonical" href="https://www.fung.es/recipes.html">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipes – Filter by Wild Edibles</title>
  <style>
    body {
      margin: 0;
      padding: 40px;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, rgba(255, 252, 239, 0.95), rgba(240, 240, 230, 0.95));
      color: black;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .container {
      max-width: 900px;
      width: 100%;
      margin: auto;
    }
    .logo {
      width: 250px;
      margin-bottom: 20px;
    }
    .button {
      position: fixed;
      top: 20px;
      right: 35px;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      z-index: 999;
    }
    .button:hover {
      background-color: rgba(0, 0, 0, 1);
    }
    .dropdown-wrapper {
      position: relative;
      display: block;
      margin-bottom: 20px;
      width: 100%;
    }
    #dropdown-toggle {
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      font-size: 16px;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
    }
    #dropdown-panel {
      display: none;
      position: absolute;
      z-index: 999;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      max-height: 300px;
      overflow-y: auto;
      width: 100%;
      box-sizing: border-box;
    }
    .emoji-filter {
      font-size: 20px;
      padding: 4px 8px;
      cursor: pointer;
      border-radius: 6px;
      margin: 0 4px;
      transition: background 0.2s ease;
    }
    .emoji-filter:hover {
      background: #ffe;
    }
    .species-option {
      display: flex;
      align-items: center;
      margin: 6px 0;
    }
    .species-option input[type="checkbox"] {
      margin-right: 8px;
    }
    .recipe {
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      margin-bottom: 20px;
    }
    .recipe h3 {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <button class="button" onclick="closePage()">X</button>
  <script>
    function closePage() {
      if (document.referrer) {
        window.history.back();
      } else {
        window.location.href = 'https://fung.es';
      }
    }
  </script>

  <div class="container">
    <img src="https://raw.githubusercontent.com/lodist/funges/main/icons/logo_funges.webp" alt="Logo" class="logo">
    
    <p style="background: #fff3cd; color: #856404; padding: 12px 16px; border-left: 5px solid #ffa726; border-radius: 6px; margin-bottom: 20px; font-size: 15px;">
      ⚠️ <strong>Foraging Safety:</strong> Always ensure proper identification before foraging. When in doubt, consult a local expert. Some wild foods can have toxic lookalikes or cause adverse reactions in sensitive individuals.
    </p>
        
    <div class="dropdown-wrapper">
      <div id="dropdown-toggle" onclick="toggleDropdown(event)"></div>
      <div id="dropdown-panel">
        <div style="text-align: center; margin-bottom: 10px;">
          <span class="emoji-filter" onclick="setEmojiFilter('🍄')">🍄</span>
          <span class="emoji-filter" onclick="setEmojiFilter('🌱')">🌱</span>
          <span class="emoji-filter" onclick="setEmojiFilter('🌰')">🌰</span>
          <span class="emoji-filter" onclick="setEmojiFilter('🍇')">🍇</span>
          <span class="emoji-filter" onclick="setEmojiFilter('🌸')">🌸</span>
          <span class="emoji-filter" onclick="setEmojiFilter('')">✖️</span>
        </div>
        <div id="species-options"></div>
      </div>
    </div>

    <div id="recipe-list"></div>
  
  </div>

  <script>
    const speciesOptions = {
      "🍄 Porcino (Boletus edulis)": "mushroom",
      "🌱 Amaranth (Amaranthus retroflexus)": "amaranth",
      "🌱 Artichoke (Cynara cardunculus)": "artichoke",
      "🌱 Asparagus (Asparagus acutifolius)": "asparagus",
      "🍄 Chanterelle (Cantharellus cibarius)": "chant",
      "🍄 Chanterelle Black (Craterellus cornucopioides)": "black_chant",
      "🌰 Chestnut (Castanea sativa)": "chestnut",
      "🌱 Chickweed (Stellaria media)": "chickweed",
      "🌸 Dandelion (Taraxacum officinale)": "dandelion",
      "🌱 Garlic (Allium ursinum)": "garlic",
      "🍇 Lingonberry (Vaccinium vitis-idaea)": "lingonb",
      "🌱 Masterwort (Peucedanum ostruthium)": "masterwort",
      "🍄 Morel (Morchella esculenta)": "morel",
      "🌱 Nettle (Urtica dioica)": "nettle",
      "🍄 Parasol (Macrolepiota procera)": "parasol",
      "🍇 Raspberry (Rubus idaeus)": "raspberry",
      "🌱 Sorrel (Rumex acetosa)": "sorrel",
      "🍄 St. George's (Calocybe gambosa)": "st_george",
      "🍇 Strawberry (Fragaria vesca)": "strawberry",
      "🍄 Truffle Black (Tuber melanosporum)": "truffle_b",
      "🌰 Walnut (Juglans regia)": "walnut"
    };
    
    const translations = {
      en: {
        selectIngredients: "Select Ingredients ▼",
        ingredients: "Ingredients:",
        instructions: "Instructions:"
      },
      it: {
        selectIngredients: "Seleziona ingredienti ▼",
        ingredients: "Ingredienti:",
        instructions: "Istruzioni:"
      },
      es: {
        selectIngredients: "Selecciona ingredientes ▼",
        ingredients: "Ingredientes:",
        instructions: "Instrucciones:"
      },
      fr: {
        selectIngredients: "Sélectionnez les ingrédients ▼",
        ingredients: "Ingrédients :",
        instructions: "Instructions :"
      }
    };


    const recipes = {
en: [
{
  species: "amaranth,chickweed,sorrel,dandelion",
  title: "Amaranth & Wild Greens Patties",
  ingredients: `½ cup amaranth seeds<br>1 cup water<br>1 cup mixed wild greens (chickweed, sorrel, dandelion), finely chopped<br>1 small egg<br>2 tbsp flour or breadcrumbs<br>Salt, pepper, olive oil`,
  instructions: `Cook amaranth: Simmer amaranth seeds in water until fully absorbed (15–20 min). Let cool slightly.<br>Mix: Combine cooked amaranth with greens, egg, flour, salt, and pepper.<br>Form: Shape small patties with wet hands.<br>Pan-fry: Cook in a pan with oil for 3–4 min on each side until golden.<br>Serve: With yogurt sauce, pesto, or as a veggie burger alternative.`
},
{
  species: "black_chant",
  title: "Black Chanterelle Cream Sauce",
  ingredients: `100 g black chanterelles (fresh or 30 g dried)<br>1 small shallot, finely chopped<br>1 garlic clove, minced<br>1 tbsp butter<br>100 ml white wine (optional)<br>200 ml cream<br>Salt and black pepper to taste<br>Fresh thyme (optional)`,
  instructions: `Prepare the mushrooms: If using dried chanterelles, soak in warm water for 20 min, then drain and squeeze.<br>Sauté aromatics: Melt butter in a pan, cook shallot and garlic until soft.<br>Add mushrooms: Stir in chanterelles and sauté 5–7 min.<br>Deglaze (optional): Add white wine and reduce by half.<br>Add cream: Pour in cream, simmer 5 min until slightly thickened. Season with salt, pepper, thyme.<br>Serve: Great over fresh pasta, polenta, or roasted potatoes.`
},
{
species: "chant",
title: "Chanterelle & Herb Tart",
ingredients: `200 g fresh chanterelles<br>1 small leek, finely sliced<br>2 eggs<br>100 ml cream<br>1 tbsp olive oil<br>Fresh thyme and parsley, chopped<br>Salt and pepper to taste<br>1 sheet puff pastry`,
instructions: `Clean mushrooms: Wipe chanterelles clean with a brush or damp cloth.<br>Sauté base: Heat olive oil in a pan, cook leek until soft. Add chanterelles and sauté for 5 minutes. Season.<br>Prepare filling: Beat eggs with cream, herbs, salt, and pepper.<br>Assemble tart: Place pastry in a tart pan. Spread mushrooms and leeks evenly, pour over egg mixture.<br>Bake: Bake at 180°C (356°F) for 25–30 minutes until golden and set.<br>Serve: Warm or cold, perfect for a wild forest brunch.`
},
{
  species: "chickweed,sorrel,walnut",
  title: "Chickweed & Sorrel Salad with Walnut Vinaigrette",
  ingredients: `2 handfuls fresh chickweed leaves<br>1 handful sorrel leaves, chopped<br>1 small handful walnuts, toasted and chopped<br>2 tsp walnut oil (or olive oil)<br>1 tsp apple cider vinegar<br>1 tsp honey<br>Salt and pepper to taste`,
  instructions: `Toast walnuts: In a dry pan, toast walnuts for 3–4 minutes until fragrant. Let them cool.<br>Wash greens: Rinse chickweed and sorrel, then dry gently with a clean towel.<br>Make vinaigrette: In a small bowl, whisk walnut oil, vinegar, honey, salt, and pepper.<br>Toss salad: In a large bowl, combine chickweed, sorrel, and walnuts. Drizzle with vinaigrette and toss lightly.<br>Serve: Enjoy immediately as a refreshing and slightly tangy foraged salad.`
},
{
  species: "chestnut,mushroom,black_chant,chant",
  title: "Chestnut & Mushroom Soup",
  ingredients: `200 g roasted chestnuts (peeled)<br>150 g wild mushrooms (porcini or black chanterelles work well)<br>1 small onion, chopped<br>1 garlic clove, minced<br>500 ml vegetable broth<br>1 tbsp butter<br>1 sprig thyme<br>100 ml cream (optional)<br>Salt and pepper to taste`,
  instructions: `Sauté base: In a pot, melt butter and cook onion and garlic until soft.<br>Add mushrooms: Add chopped wild mushrooms and sauté for 5 minutes.<br>Add chestnuts and broth: Stir in the chestnuts and pour in vegetable broth. Add thyme.<br>Simmer: Bring to a boil, then reduce heat and simmer for 20 minutes.<br>Blend: Remove thyme. Use a hand blender to purée until smooth.<br>Finish: Stir in cream if desired, and adjust salt and pepper.<br>Serve hot, ideally with crusty bread or a drizzle of truffle oil.`
},
{
  species: "dandelion",
  title: "Dandelion Flower Syrup",
  ingredients: `100 dandelion flowers (only the yellow petals)<br>500 ml water<br>300 g sugar<br>Juice of 1 lemon`,
  instructions: `Clean petals: Separate yellow petals from green parts (which are bitter). Rinse gently.<br>Make infusion: In a pot, bring water to a boil, then add petals. Simmer for 10 minutes.<br>Steep overnight: Remove from heat and let it infuse overnight, covered.<br>Strain: Strain the liquid and discard petals. Add lemon juice and sugar to the liquid.<br>Cook: Simmer over low heat until it thickens into syrup (20–30 minutes).<br>Store: Pour into sterilized jars. Great on pancakes, cheese, or tea.`
}


],
it: [
{
  species: "amaranth,chickweed,sorrel,dandelion",
  title: "Frittelle di Amaranto e Erbe Selvatiche",
  ingredients: `½ tazza di semi di amaranto<br>1 tazza d'acqua<br>1 tazza di erbe selvatiche miste (centocchio, acetosa, tarassaco), tritate finemente<br>1 uovo piccolo<br>2 cucchiai di farina o pangrattato<br>Sale, pepe, olio d'oliva`,
  instructions: `Cuocere l’amaranto: Cuocere i semi di amaranto in acqua finché completamente assorbita (15–20 min). Lasciar intiepidire.<br>Mescolare: Unire amaranto cotto con erbe, uovo, farina, sale e pepe.<br>Formare: Creare piccole frittelle con le mani umide.<br>Saltare: Cuocere in padella con olio per 3–4 min per lato fino a doratura.<br>Servire: Con salsa allo yogurt, pesto o come alternativa vegetariana al burger.`
},
{
  species: "black_chant",
  title: "Salsa Cremosa di Trombetta dei Morti",
  ingredients: `100 g di trombette dei morti (fresche o 30 g secche)<br>1 piccola scalogna, tritata finemente<br>1 spicchio d'aglio, tritato<br>1 cucchiaio di burro<br>100 ml di vino bianco (opzionale)<br>200 ml di panna<br>Sale e pepe nero q.b.<br>Timo fresco (opzionale)`,
  instructions: `Preparare i funghi: Se secchi, ammollare in acqua calda per 20 min, poi scolare e strizzare.<br>Soffriggere gli aromi: Sciogliere il burro in padella, cuocere scalogna e aglio fino a morbidezza.<br>Aggiungere i funghi: Unire le trombette e saltare 5–7 min.<br>Sfumare (opzionale): Aggiungere vino e far ridurre della metà.<br>Aggiungere panna: Versare la panna, cuocere 5 min fino a leggero addensamento. Regolare di sale, pepe, timo.<br>Servire: Perfetta con pasta fresca, polenta o patate arrosto.`
},
{
species: "chant",
title: "Tarte di Finferli e Erbe",
ingredients: `200 g di finferli freschi<br>1 piccolo porro, affettato sottile<br>2 uova<br>100 ml di panna<br>1 cucchiaio di olio d'oliva<br>Timo e prezzemolo freschi, tritati<br>Sale e pepe q.b.<br>1 rotolo di pasta sfoglia`,
instructions: `Pulisci i funghi: Pulisci i finferli con un pennello o un panno umido.<br>Base saltata: Scalda l'olio in padella, cuoci il porro fino a che diventa morbido. Aggiungi i finferli e salta per 5 minuti. Aggiusta di sale.<br>Prepara il ripieno: Sbatti le uova con la panna, le erbe, sale e pepe.<br>Assembla: Disponi la pasta sfoglia in uno stampo, aggiungi funghi e porri, versa sopra il composto di uova.<br>Cottura: Inforna a 180°C per 25–30 minuti fino a doratura.<br>Servi: Calda o fredda, ideale per un brunch nei boschi.`
},
{
  species: "chickweed,sorrel,walnut",
  title: "Insalata di Centocchio e Acetosa con Vinaigrette alle Noci",
  ingredients: `2 manciate di foglie fresche di centocchio<br>1 manciata di foglie di acetosa, tritate<br>1 piccola manciata di noci, tostate e tritate<br>2 cucchiaini di olio di noci (o olio d'oliva)<br>1 cucchiaino di aceto di mele<br>1 cucchiaino di miele<br>Sale e pepe a piacere`,
  instructions: `Tostare le noci: In una padella senza olio, tostare le noci per 3–4 minuti finché non risultano fragranti. Lasciar raffreddare.<br>Lavare le erbe: Sciacquare centocchio e acetosa, poi asciugarle delicatamente con un panno pulito.<br>Preparare la vinaigrette: In una ciotola piccola, sbattere olio, aceto, miele, sale e pepe.<br>Mescolare l’insalata: In una ciotola grande, unire centocchio, acetosa e noci. Condire con la vinaigrette e mescolare leggermente.<br>Servire: Gustare subito come insalata fresca e leggermente acidula.`
},
{
  species: "chestnut,mushroom,black_chant,chant",
  title: "Zuppa di Castagne e Funghi",
  ingredients: `200 g di castagne arrostite (sbucciate)<br>150 g di funghi selvatici (porcini o trombette dei morti ideali)<br>1 cipolla piccola, tritata<br>1 spicchio d'aglio, tritato<br>500 ml di brodo vegetale<br>1 cucchiaio di burro<br>1 rametto di timo<br>100 ml di panna (opzionale)<br>Sale e pepe q.b.`,
  instructions: `Soffriggere la base: In una pentola, sciogliere il burro e cuocere cipolla e aglio finché morbidi.<br>Aggiungere i funghi: Unire i funghi selvatici tagliati e saltare per 5 minuti.<br>Aggiungere castagne e brodo: Unire le castagne e versare il brodo vegetale. Aggiungere il timo.<br>Cuocere: Portare a ebollizione, poi abbassare la fiamma e cuocere a fuoco lento per 20 minuti.<br>Frullare: Rimuovere il timo. Frullare con un mixer a immersione fino a ottenere una crema liscia.<br>Finire: Aggiungere la panna se desiderato, regolare di sale e pepe.<br>Servire caldo, accompagnato da pane rustico o un filo d'olio al tartufo.`
},
{
  species: "dandelion",
  title: "Sciroppo di Fiori di Tarassaco",
  ingredients: `100 fiori di tarassaco (solo i petali gialli)<br>500 ml d'acqua<br>300 g di zucchero<br>Succo di 1 limone`,
  instructions: `Pulire i petali: Separare i petali gialli dalle parti verdi (che sono amare). Sciacquare delicatamente.<br>Preparare l'infuso: In una pentola portare l'acqua a ebollizione, aggiungere i petali e far sobbollire per 10 minuti.<br>Lasciare in infusione: Togliere dal fuoco e lasciare in infusione coperto per tutta la notte.<br>Filtrare: Filtrare il liquido ed eliminare i petali. Aggiungere succo di limone e zucchero al liquido.<br>Cuocere: Far sobbollire a fuoco basso fino a che si addensa in uno sciroppo (20–30 minuti).<br>Conservare: Versare in vasetti sterilizzati. Ottimo su pancakes, formaggi o nel tè.`
}


],
es: [
{
  species: "amaranth,chickweed,sorrel,dandelion",
  title: "Tortitas de Amaranto y Verduras Silvestres",
  ingredients: `½ taza de semillas de amaranto<br>1 taza de agua<br>1 taza de verduras silvestres mixtas (pamplina, acedera, diente de león), picadas finamente<br>1 huevo pequeño<br>2 cucharadas de harina o pan rallado<br>Sal, pimienta, aceite de oliva`,
  instructions: `Cocinar el amaranto: Hervir las semillas de amaranto en agua hasta que se absorba por completo (15–20 min). Dejar enfriar un poco.<br>Mezclar: Combinar el amaranto cocido con verduras, huevo, harina, sal y pimienta.<br>Formar: Hacer pequeñas tortitas con las manos húmedas.<br>Dorar: Cocinar en sartén con aceite 3–4 min por lado hasta dorar.<br>Servir: Con salsa de yogur, pesto o como hamburguesa vegetariana.`
},
{
  species: "black_chant",
  title: "Salsa Cremosa de Trompetas Negras",
  ingredients: `100 g de trompetas negras (frescas o 30 g secas)<br>1 chalota pequeña, picada<br>1 diente de ajo, picado<br>1 cucharada de mantequilla<br>100 ml de vino blanco (opcional)<br>200 ml de nata<br>Sal y pimienta negra al gusto<br>Tomillo fresco (opcional)`,
  instructions: `Preparar las setas: Si son secas, remojar en agua tibia 20 min, luego escurrir y exprimir.<br>Sofreír aromáticos: Derretir mantequilla en sartén, cocinar chalota y ajo hasta tiernos.<br>Añadir setas: Incorporar trompetas negras y saltear 5–7 min.<br>Desglasar (opcional): Añadir vino blanco y reducir a la mitad.<br>Añadir nata: Verter nata, cocinar 5 min hasta espesar un poco. Salpimentar, añadir tomillo.<br>Servir: Ideal con pasta fresca, polenta o patatas asadas.`
},
{
species: "chant",
title: "Tarta de Rebozuelos y Hierbas",
ingredients: `200 g de rebozuelos frescos<br>1 puerro pequeño, en rodajas finas<br>2 huevos<br>100 ml de nata para cocinar<br>1 cucharada de aceite de oliva<br>Tomillo y perejil frescos, picados<br>Sal y pimienta al gusto<br>1 lámina de masa de hojaldre`,
instructions: `Limpiar las setas: Limpiar los rebozuelos con un pincel o paño húmedo.<br>Saltear base: Calentar aceite en sartén, cocinar el puerro hasta que esté blando. Añadir los rebozuelos y saltear 5 min. Sazonar.<br>Preparar relleno: Batir huevos con nata, hierbas, sal y pimienta.<br>Montar la tarta: Colocar la masa en el molde, añadir las setas y puerros, verter la mezcla de huevos.<br>Hornear: Hornear a 180°C durante 25–30 min hasta dorar.<br>Servir: Caliente o fría, ideal para brunch silvestre.`
},
{
  species: "chickweed,sorrel,walnut",
  title: "Ensalada de Pamplina y Acedera con Vinagreta de Nueces",
  ingredients: `2 puñados de hojas frescas de pamplina<br>1 puñado de hojas de acedera, picadas<br>1 puñado pequeño de nueces, tostadas y picadas<br>2 cdtas de aceite de nuez (o de oliva)<br>1 cdta de vinagre de manzana<br>1 cdta de miel<br>Sal y pimienta al gusto`,
  instructions: `Tostar las nueces: En una sartén sin aceite, tostar las nueces durante 3–4 minutos hasta que desprendan aroma. Dejar enfriar.<br>Lavar los verdes: Enjuagar la pamplina y la acedera, y secarlas con un paño limpio.<br>Preparar la vinagreta: Batir en un bol pequeño el aceite, vinagre, miel, sal y pimienta.<br>Mezclar la ensalada: En un bol grande, combinar la pamplina, acedera y nueces. Rociar con la vinagreta y mezclar suavemente.<br>Servir: Disfrutar enseguida como una ensalada silvestre fresca y ligeramente ácida.`
},
{
  species: "chestnut,mushroom,black_chant,chant",
  title: "Sopa de Castañas y Setas",
  ingredients: `200 g de castañas asadas (peladas)<br>150 g de setas silvestres (boletus o trompetas negras)<br>1 cebolla pequeña, picada<br>1 diente de ajo, picado<br>500 ml de caldo de verduras<br>1 cucharada de mantequilla<br>1 ramita de tomillo<br>100 ml de nata (opcional)<br>Sal y pimienta al gusto`,
  instructions: `Saltear la base: En una olla, derretir la mantequilla y cocinar la cebolla y el ajo hasta que estén tiernos.<br>Añadir las setas: Incorporar las setas troceadas y saltear durante 5 minutos.<br>Añadir castañas y caldo: Agregar las castañas y el caldo de verduras. Añadir el tomillo.<br>Cocer: Llevar a ebullición, reducir el fuego y cocer a fuego lento durante 20 minutos.<br>Triturar: Retirar el tomillo. Triturar con batidora de mano hasta obtener una crema suave.<br>Finalizar: Incorporar la nata si se desea, y ajustar de sal y pimienta.<br>Servir caliente, idealmente con pan crujiente o un chorrito de aceite de trufa.`
},
{
  species: "dandelion",
  title: "Jarabe de Flores de Diente de León",
  ingredients: `100 flores de diente de león (solo los pétalos amarillos)<br>500 ml de agua<br>300 g de azúcar<br>Zumo de 1 limón`,
  instructions: `Limpiar los pétalos: Separar los pétalos amarillos de las partes verdes (que son amargas). Enjuagar suavemente.<br>Preparar la infusión: En una olla, hervir el agua, añadir los pétalos y cocer a fuego lento durante 10 minutos.<br>Dejar en infusión: Retirar del fuego y dejar infusionar tapado toda la noche.<br>Colar: Colar el líquido y desechar los pétalos. Añadir el zumo de limón y el azúcar al líquido.<br>Cocinar: Cocinar a fuego bajo hasta que espese en un jarabe (20–30 minutos).<br>Conservar: Verter en frascos esterilizados. Ideal para tortitas, quesos o té.`
}


],
fr: [
{
  species: "amaranth,chickweed,sorrel,dandelion",
  title: "Galettes d'Amarante et de Plantes Sauvages",
  ingredients: `½ tasse de graines d’amarante<br>1 tasse d’eau<br>1 tasse de plantes sauvages mélangées (mouron des oiseaux, oseille, pissenlit), finement hachées<br>1 petit œuf<br>2 c. à soupe de farine ou chapelure<br>Sel, poivre, huile d’olive`,
  instructions: `Cuire l’amarante : Faites mijoter les graines d’amarante dans l’eau jusqu’à absorption complète (15–20 min). Laisser tiédir.<br>Mélanger : Combinez l’amarante cuite avec les plantes, l’œuf, la farine, le sel et le poivre.<br>Former : Façonnez de petites galettes avec les mains humides.<br>Faire revenir : Faites cuire dans une poêle avec de l’huile pendant 3–4 min de chaque côté jusqu’à doré.<br>Servir : Avec une sauce au yaourt, du pesto ou comme alternative végétarienne aux burgers.`
},
{
  species: "black_chant",
  title: "Sauce Crème aux Trompettes de la Mort",
  ingredients: `100 g de trompettes de la mort (fraîches ou 30 g séchées)<br>1 petite échalote, finement hachée<br>1 gousse d'ail, émincée<br>1 c. à soupe de beurre<br>100 ml de vin blanc (optionnel)<br>200 ml de crème<br>Sel et poivre noir au goût<br>Thym frais (optionnel)`,
  instructions: `Préparer les champignons : Si secs, réhydrater 20 min dans l'eau tiède, égoutter et presser.<br>Faire revenir aromates : Faire fondre le beurre, cuire échalote et ail jusqu'à tendreté.<br>Ajouter les champignons : Sauter 5–7 min.<br>Déglacer (optionnel) : Verser le vin blanc, réduire de moitié.<br>Ajouter la crème : Mijoter 5 min, assaisonner avec sel, poivre, thym.<br>Servir : Parfait avec pâtes fraîches, polenta ou pommes de terre rôties.`
},
{
species: "chant",
title: "Tarte aux Girolles et Herbes",
ingredients: `200 g de girolles fraîches<br>1 petit poireau, finement émincé<br>2 œufs<br>100 ml de crème<br>1 c. à soupe d’huile d’olive<br>Thym et persil frais, hachés<br>Sel et poivre au goût<br>1 pâte feuilletée`,
instructions: `Nettoyer les champignons : Brosser délicatement les girolles ou les essuyer avec un linge humide.<br>Base sautée : Chauffer l’huile, faire revenir le poireau jusqu’à tendreté. Ajouter les girolles, cuire 5 min. Assaisonner.<br>Préparer l’appareil : Battre les œufs avec la crème, les herbes, le sel et le poivre.<br>Assembler : Foncer un moule avec la pâte, disposer les champignons et poireaux, verser l’appareil.<br>Cuire : Enfourner à 180°C pendant 25–30 min jusqu’à coloration dorée.<br>Servir : Chaud ou froid, parfait pour un brunch forestier.`
},
{
  species: "chickweed,sorrel,walnut",
  title: "Salade de Mouron et Oseille avec Vinaigrette aux Noix",
  ingredients: `2 poignées de feuilles fraîches de mouron<br>1 poignée de feuilles d'oseille, hachées<br>1 petite poignée de noix, grillées et hachées<br>2 c. à café d'huile de noix (ou d'olive)<br>1 c. à café de vinaigre de cidre<br>1 c. à café de miel<br>Sel et poivre au goût`,
  instructions: `Griller les noix: Dans une poêle sans matière grasse, faire griller les noix pendant 3–4 minutes jusqu'à ce qu'elles dégagent un parfum. Laisser refroidir.<br>Laver les herbes: Rincer le mouron et l'oseille, puis les sécher délicatement avec un linge propre.<br>Préparer la vinaigrette: Fouetter dans un petit bol l'huile, le vinaigre, le miel, le sel et le poivre.<br>Assembler la salade: Dans un grand saladier, mélanger le mouron, l'oseille et les noix. Arroser de vinaigrette et mélanger délicatement.<br>Servir: Déguster aussitôt, en salade fraîche et légèrement acidulée.`
},
{
  species: "chestnut,mushroom,black_chant,chant",
  title: "Soupe de Châtaignes et Champignons",
  ingredients: `200 g de châtaignes rôties (épluchées)<br>150 g de champignons sauvages (cèpes ou trompettes de la mort)<br>1 petit oignon, haché<br>1 gousse d'ail, hachée<br>500 ml de bouillon de légumes<br>1 c. à soupe de beurre<br>1 branche de thym<br>100 ml de crème (optionnel)<br>Sel et poivre au goût`,
  instructions: `Faire revenir la base: Dans une casserole, faire fondre le beurre et faire revenir l'oignon et l'ail jusqu'à ce qu'ils soient tendres.<br>Ajouter les champignons: Ajouter les champignons coupés et faire revenir pendant 5 minutes.<br>Ajouter châtaignes et bouillon: Incorporer les châtaignes et verser le bouillon. Ajouter le thym.<br>Laisser mijoter: Porter à ébullition, puis réduire le feu et laisser mijoter 20 minutes.<br>Mixez: Retirer le thym. Mixer à l’aide d’un mixeur plongeant jusqu'à obtenir une texture lisse.<br>Finaliser: Ajouter la crème si désiré, rectifier l’assaisonnement.<br>Servir chaud, idéalement avec du pain croustillant ou un filet d’huile de truffe.`
},
{
  species: "dandelion",
  title: "Sirop de Fleurs de Pissenlit",
  ingredients: `100 fleurs de pissenlit (seulement les pétales jaunes)<br>500 ml d'eau<br>300 g de sucre<br>Jus d'1 citron`,
  instructions: `Nettoyer les pétales : Séparer les pétales jaunes des parties vertes (qui sont amères). Rincer délicatement.<br>Préparer l'infusion : Porter l'eau à ébullition, ajouter les pétales et laisser mijoter 10 minutes.<br>Laisser infuser : Retirer du feu et laisser infuser toute la nuit à couvert.<br>Filtrer : Filtrer le liquide et jeter les pétales. Ajouter le jus de citron et le sucre au liquide.<br>Cuire : Faire mijoter à feu doux jusqu'à obtenir un sirop (20–30 minutes).<br>Conserver : Verser dans des bocaux stérilisés. Délicieux sur des crêpes, du fromage ou dans du thé.`
}


]
};


    let selectedSpecies = [];
    let emojiFilter = "";

    function toggleDropdown(event) {
      const panel = document.getElementById("dropdown-panel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
      event.stopPropagation();
    }

    function closeDropdownOnClickOutside(e) {
      const panel = document.getElementById("dropdown-panel");
      const toggle = document.getElementById("dropdown-toggle");
      if (!panel.contains(e.target) && e.target !== toggle) {
        panel.style.display = "none";
      }
    }
    document.addEventListener("click", closeDropdownOnClickOutside);

    function setEmojiFilter(emoji) {
      emojiFilter = emoji;
      renderSpeciesOptions();
    }

    function renderSpeciesOptions() {
      const container = document.getElementById("species-options");
      container.innerHTML = "";
      for (const [label, value] of Object.entries(speciesOptions)) {
        if (emojiFilter === "" || label.includes(emojiFilter)) {
          const option = document.createElement("div");
          option.className = "species-option";
          const isChecked = selectedSpecies.includes(value) ? "checked" : "";
          option.innerHTML = `<input type="checkbox" value="${value}" onchange="toggleSpecies(this)" ${isChecked}> ${label}`;
          container.appendChild(option);
        }
      }
    }
    
    function toggleSpecies(checkbox) {
      const value = checkbox.value.trim();
      if (checkbox.checked) {
        if (!selectedSpecies.includes(value)) selectedSpecies.push(value);
      } else {
        selectedSpecies = selectedSpecies.filter(s => s !== value);
      }
      filterRecipes();
    }
    
    function filterRecipes() {
      const allRecipes = document.querySelectorAll(".recipe");
    
      allRecipes.forEach(recipe => {
        const speciesList = recipe.dataset.species.split(',').map(s => s.trim());
        const matches = selectedSpecies.filter(s => speciesList.includes(s));
    
        console.log("🔍 Recipe:", recipe.querySelector("h3").innerText);
        console.log(" - speciesList:", speciesList);
        console.log(" - selectedSpecies:", selectedSpecies);
        console.log(" - matches:", matches);
    
        if (selectedSpecies.length === 0) {
          recipe.style.display = "block";
        } else if (matches.length === selectedSpecies.length) {
          recipe.style.display = "block";
        } else if (matches.length > 0) {
          recipe.style.display = "block";
        } else {
          recipe.style.display = "none";
        }
      });
    }
  
    // 👉 Get species from URL before rendering options
    function getQuerySpecies() {
      const params = new URLSearchParams(window.location.search);
      const ingredients = params.get("ingredients");
      
      // if lang= is in URL → use it, else take <html lang="">
      window.currentLang = params.get("lang") || document.documentElement.lang || "en"; 
      console.log("🌍 Language detected:", window.currentLang);
      const t = translations[window.currentLang] || translations["en"];
          
      if (!ingredients) return;
      selectedSpecies = ingredients.split(",").map(s => s.trim());
    }

    function renderRecipes() {
      const langRecipes = recipes[window.currentLang] || recipes["en"];
      const recipeList = document.getElementById("recipe-list");
      recipeList.innerHTML = "";
      
      langRecipes.forEach(recipe => {
        const recipeDiv = document.createElement("div");
        recipeDiv.className = "recipe";
        recipeDiv.dataset.species = recipe.species;
        recipeDiv.innerHTML = `
          <h3>${recipe.title}</h3>
          <p><strong>${translations[window.currentLang].ingredients}</strong><br>${recipe.ingredients}</p>
          <p><strong>${translations[window.currentLang].instructions}</strong><br>${recipe.instructions}</p>
        `;
        recipeList.appendChild(recipeDiv);
      });
    }

    getQuerySpecies();
    document.getElementById("dropdown-toggle").innerHTML = translations[window.currentLang].selectIngredients;
    renderRecipes(); 
    renderSpeciesOptions();
    filterRecipes();
    
  </script>
</body>
</html>
